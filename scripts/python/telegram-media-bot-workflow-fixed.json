{
  "name": "Telegram Media Downloader Bot - Fixed",
  "nodes": [
    {
      "parameters": {},
      "id": "telegram-trigger",
      "name": "Telegram Trigger",
      "type": "n8n-nodes-base.telegramTrigger",
      "typeVersion": 1,
      "position": [250, 300],
      "webhookId": "telegram-webhook",
      "credentials": {
        "telegramApi": {
          "id": "telegram-credentials",
          "name": "Telegram Bot"
        }
      }
    },
    {
      "parameters": {
        "jsCode": "// ============================================\n// –ö–û–ù–°–¢–ê–ù–¢–´\n// ============================================\nconst PLATFORMS = {\n  YOUTUBE: 'youtube',\n  INSTAGRAM: 'instagram',\n  TWITTER: 'twitter',\n  TIKTOK: 'tiktok',\n  YANDEX_MUSIC: 'yandex_music',\n  UNKNOWN: 'unknown'\n};\n\nconst ERROR_MESSAGES = {\n  EMPTY_MESSAGE: '‚ùå –°–æ–æ–±—â–µ–Ω–∏–µ –ø—É—Å—Ç–æ–µ. –û—Ç–ø—Ä–∞–≤—å—Ç–µ —Å—Å—ã–ª–∫—É –Ω–∞ –∫–æ–Ω—Ç–µ–Ω—Ç.',\n  NO_URL: '‚ùå –ù–µ –Ω–∞–π–¥–µ–Ω–∞ —Å—Å—ã–ª–∫–∞ –≤ —Å–æ–æ–±—â–µ–Ω–∏–∏. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –æ—Ç–ø—Ä–∞–≤—å—Ç–µ —Å—Å—ã–ª–∫—É –Ω–∞ –∫–æ–Ω—Ç–µ–Ω—Ç.',\n  INVALID_URL: '‚ùå –ù–µ–≤–µ—Ä–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç URL. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å —Å—Å—ã–ª–∫–∏.',\n  UNSUPPORTED_PLATFORM: '‚ùå –î–∞–Ω–Ω–∞—è –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞ –ø–æ–∫–∞ –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è.\\n\\n–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã:\\n‚Ä¢ YouTube\\n‚Ä¢ Instagram\\n‚Ä¢ TikTok\\n‚Ä¢ Twitter/X\\n‚Ä¢ –Ø–Ω–¥–µ–∫—Å.–ú—É–∑—ã–∫–∞'\n};\n\nconst URL_PATTERNS = {\n  [PLATFORMS.YOUTUBE]: /(?:youtube\\.com\\/(?:watch\\?v=|shorts\\/|embed\\/)|youtu\\.be\\/)([\\w-]+)/i,\n  [PLATFORMS.INSTAGRAM]: /instagram\\.com/i,\n  [PLATFORMS.TWITTER]: /(?:twitter\\.com|x\\.com)/i,\n  [PLATFORMS.TIKTOK]: /(?:tiktok\\.com|vm\\.tiktok\\.com)/i,\n  [PLATFORMS.YANDEX_MUSIC]: /music\\.yandex/i\n};\n\n// ============================================\n// –í–°–ü–û–ú–û–ì–ê–¢–ï–õ–¨–ù–´–ï –§–£–ù–ö–¶–ò–ò\n// ============================================\n\n/**\n * –ò–∑–≤–ª–µ–∫–∞–µ—Ç URL –∏–∑ —Ç–µ–∫—Å—Ç–∞\n */\nfunction extractUrl(text) {\n  if (!text || typeof text !== 'string') {\n    return null;\n  }\n  \n  const urlRegex = /(https?:\\/\\/[^\\s]+)/gi;\n  const matches = text.match(urlRegex);\n  \n  return matches && matches.length > 0 ? matches[0].trim() : null;\n}\n\n/**\n * –í–∞–ª–∏–¥–∞—Ü–∏—è URL\n */\nfunction isValidUrl(url) {\n  if (!url || typeof url !== 'string') {\n    return false;\n  }\n  \n  try {\n    const urlObj = new URL(url);\n    return urlObj.protocol === 'http:' || urlObj.protocol === 'https:';\n  } catch (error) {\n    return false;\n  }\n}\n\n/**\n * –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç –ø–ª–∞—Ç—Ñ–æ—Ä–º—É –ø–æ URL\n */\nfunction detectPlatform(url) {\n  if (!url) {\n    return PLATFORMS.UNKNOWN;\n  }\n  \n  const lowerUrl = url.toLowerCase();\n  \n  for (const [platform, pattern] of Object.entries(URL_PATTERNS)) {\n    if (pattern.test(lowerUrl)) {\n      return platform;\n    }\n  }\n  \n  return PLATFORMS.UNKNOWN;\n}\n\n/**\n * –°–æ–∑–¥–∞–µ—Ç –æ–±—ä–µ–∫—Ç –æ—à–∏–±–∫–∏\n */\nfunction createError(message, chatId) {\n  return {\n    error: true,\n    message: message,\n    chatId: chatId,\n    timestamp: new Date().toISOString()\n  };\n}\n\n/**\n * –í–∞–ª–∏–¥–∞—Ü–∏—è –∏ –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ chat_id\n */\nfunction getChatId(message) {\n  return message?.chat?.id || null;\n}\n\n// ============================================\n// –û–°–ù–û–í–ù–ê–Ø –õ–û–ì–ò–ö–ê\n// ============================================\n\ntry {\n  const message = $input.item.json.message;\n  \n  if (!message) {\n    return createError(ERROR_MESSAGES.EMPTY_MESSAGE, null);\n  }\n  \n  const chatId = getChatId(message);\n  \n  if (!chatId) {\n    return createError('‚ùå –ù–µ —É–¥–∞–ª–æ—Å—å –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å chat ID', null);\n  }\n  \n  const text = message.text || '';\n  \n  // –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –ø—É—Å—Ç–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ\n  if (!text || text.trim().length === 0) {\n    return createError(ERROR_MESSAGES.EMPTY_MESSAGE, chatId);\n  }\n  \n  // –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ URL\n  const url = extractUrl(text);\n  \n  if (!url) {\n    return createError(ERROR_MESSAGES.NO_URL, chatId);\n  }\n  \n  // –í–∞–ª–∏–¥–∞—Ü–∏—è URL\n  if (!isValidUrl(url)) {\n    return createError(ERROR_MESSAGES.INVALID_URL, chatId);\n  }\n  \n  // –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã\n  const platform = detectPlatform(url);\n  \n  if (platform === PLATFORMS.UNKNOWN) {\n    return createError(ERROR_MESSAGES.UNSUPPORTED_PLATFORM, chatId);\n  }\n  \n  // –£—Å–ø–µ—à–Ω—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç\n  return {\n    url: url,\n    platform: platform,\n    chatId: chatId,\n    messageId: message.message_id,\n    error: false,\n    timestamp: new Date().toISOString()\n  };\n  \n} catch (error) {\n  return createError(\n    `‚ùå –û—à–∏–±–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏: ${error.message}`,\n    message?.chat?.id || null\n  );\n}"
      },
      "id": "code-parser",
      "name": "Code - Parse URL",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [450, 300]
    },
    {
      "parameters": {
        "conditions": {
          "boolean": [
            {
              "value1": "={{ $json.error }}",
              "value2": true
            }
          ]
        }
      },
      "id": "if-error-check",
      "name": "IF - Check Error",
      "type": "n8n-nodes-base.if",
      "typeVersion": 1,
      "position": [650, 300]
    },
    {
      "parameters": {
        "chatId": "={{ $json.chatId }}",
        "text": "={{ $json.message }}",
        "additionalFields": {
          "parse_mode": "HTML"
        }
      },
      "id": "send-error-message",
      "name": "Send Error Message",
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1,
      "position": [850, 200],
      "credentials": {
        "telegramApi": {
          "id": "telegram-credentials",
          "name": "Telegram Bot"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $json.chatId }}",
        "text": "‚è≥ –°–∫–∞—á–∏–≤–∞—é –∫–æ–Ω—Ç–µ–Ω—Ç, –ø–æ–∂–∞–ª—É–π—Å—Ç–∞ –ø–æ–¥–æ–∂–¥–∏—Ç–µ...",
        "additionalFields": {}
      },
      "id": "send-status-message",
      "name": "Send Status Message",
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1,
      "position": [850, 400],
      "credentials": {
        "telegramApi": {
          "id": "telegram-credentials",
          "name": "Telegram Bot"
        }
      }
    },
    {
      "parameters": {
        "mode": "rules",
        "value": "={{ $json.platform }}",
        "rules": {
          "values": [
            {
              "value": "youtube"
            },
            {
              "value": "instagram"
            },
            {
              "value": "tiktok"
            },
            {
              "value": "twitter"
            },
            {
              "value": "yandex_music"
            }
          ]
        }
      },
      "id": "switch-platform",
      "name": "Switch - Platform",
      "type": "n8n-nodes-base.switch",
      "typeVersion": 1,
      "position": [1050, 400]
    },
    {
      "parameters": {
        "method": "POST",
        "url": "http://172.18.0.7:8022/api/youtube/download",
        "authentication": "none",
        "sendBody": true,
        "bodyContentType": "json",
        "jsonBody": "={{ {\"url\": $json.url, \"chat_id\": $json.chatId, \"platform\": $json.platform} }}"
      },
      "id": "http-youtube",
      "name": "HTTP Request - YouTube",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.1,
      "position": [1250, 100]
    },
    {
      "parameters": {
        "method": "POST",
        "url": "http://172.18.0.7:8022/api/instagram/download",
        "authentication": "none",
        "sendBody": true,
        "bodyContentType": "json",
        "jsonBody": "={{ {\"url\": $json.url, \"chat_id\": $json.chatId, \"platform\": $json.platform} }}"
      },
      "id": "http-instagram",
      "name": "HTTP Request - Instagram",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.1,
      "position": [1250, 200]
    },
    {
      "parameters": {
        "method": "POST",
        "url": "http://172.18.0.7:8022/api/tiktok/download",
        "authentication": "none",
        "sendBody": true,
        "bodyContentType": "json",
        "jsonBody": "={{ {\"url\": $json.url, \"chat_id\": $json.chatId, \"platform\": $json.platform} }}"
      },
      "id": "http-tiktok",
      "name": "HTTP Request - TikTok",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.1,
      "position": [1250, 300]
    },
    {
      "parameters": {
        "method": "POST",
        "url": "http://172.18.0.8:6025/api/twitter/download",
        "authentication": "none",
        "sendBody": true,
        "bodyContentType": "json",
        "jsonBody": "={{ {\"url\": $json.url, \"chat_id\": $json.chatId, \"platform\": $json.platform, \"type\": \"video\"} }}"
      },
      "id": "http-twitter",
      "name": "HTTP Request - Twitter",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.1,
      "position": [1250, 400]
    },
    {
      "parameters": {
        "method": "POST",
        "url": "http://172.18.0.9:6026/api/yandex-music/download",
        "authentication": "none",
        "sendBody": true,
        "bodyContentType": "json",
        "jsonBody": "={{ {\"url\": $json.url, \"chat_id\": $json.chatId, \"platform\": $json.platform} }}"
      },
      "id": "http-yandex-music",
      "name": "HTTP Request - Yandex.Music",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.1,
      "position": [1250, 500]
    },
    {
      "parameters": {
        "chatId": "={{ $json.chatId }}",
        "text": "‚ùå –ù–µ–ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º–∞—è –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å—Å—ã–ª–∫–∏ —Å YouTube, Instagram, TikTok, Twitter –∏–ª–∏ –Ø–Ω–¥–µ–∫—Å.–ú—É–∑—ã–∫–∞.",
        "additionalFields": {}
      },
      "id": "send-unsupported-platform",
      "name": "Send Unsupported Platform",
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1,
      "position": [1250, 600],
      "credentials": {
        "telegramApi": {
          "id": "telegram-credentials",
          "name": "Telegram Bot"
        }
      }
    },
    {
      "parameters": {
        "jsCode": "// –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º –æ—Ç–≤–µ—Ç –æ—Ç API\nconst data = $input.item.json || $json;\n\n// –ü–æ–ª—É—á–∞–µ–º platform –∏–∑ –∏—Å—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö\nconst platform = $json.platform || data.platform || null;\nconst baseChatId = $json.chatId || $json.chat_id || data.chat_id || data.chatId;\n\n// –ü—Ä–æ–ø—É—Å–∫–∞–µ–º —è–≤–Ω—ã–µ –æ—à–∏–±–∫–∏\nif (data.error === true || data.error === 'true' || data.success === false || data.success === 'false' || (data.statusCode && data.statusCode >= 400)) {\n  return {\n    json: {\n      error: true,\n      message: data.message || data.error || '–û—à–∏–±–∫–∞ –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ –∫–æ–Ω—Ç–µ–Ω—Ç–∞',\n      chatId: baseChatId\n    }\n  };\n}\n\n// –û–ø—Ä–µ–¥–µ–ª—è–µ–º —É—Å–ø–µ—à–Ω–æ—Å—Ç—å –æ—Ç–≤–µ—Ç–∞\nconst isSuccess = data.success === true || data.success === 'true' || data.status === 'success' || data.statusCode === 200 || (data.statusCode >= 200 && data.statusCode < 300) || data.file_path || data.file_url || data.url || data.download_url || (data.data && (data.data.file_path || data.data.url));\n\nif (!isSuccess) {\n  return {\n    json: {\n      error: true,\n      message: '–ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–ª—É—á–∏—Ç—å –º–µ–¥–∏–∞-—Ñ–∞–π–ª',\n      chatId: baseChatId\n    }\n  };\n}\n\n// –ò–∑–≤–ª–µ–∫–∞–µ–º –ø—É—Ç—å –∫ —Ñ–∞–π–ª—É\nconst filePath = data.file_path || data.file_url || data.url || data.download_url || (data.data && (data.data.file_path || data.data.url)) || null;\n\n// –ò–∑–≤–ª–µ–∫–∞–µ–º –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ\nlet metadata = data.metadata || {};\nif (!metadata && data.data) {\n  if (data.data.metadata) {\n    metadata = data.data.metadata;\n  } else if (!data.data.file_path) {\n    metadata = data.data;\n  }\n}\nif (!metadata) {\n  metadata = {};\n}\n\n// –û–ø—Ä–µ–¥–µ–ª—è–µ–º —Ç–∏–ø –∫–æ–Ω—Ç–µ–Ω—Ç–∞\nlet contentType = data.type || data.file_type || data.media_type || data.content_type || null;\n\n// –û–ø—Ä–µ–¥–µ–ª—è–µ–º –ø–æ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—é —Ñ–∞–π–ª–∞\nif (!contentType && filePath) {\n  const extension = filePath.split('.').pop().toLowerCase().split('?')[0];\n  if (extension === 'mp4' || extension === 'webm' || extension === 'mov' || extension === 'avi' || extension === 'mkv' || extension === 'flv' || extension === 'm4v') {\n    contentType = 'video';\n  } else if (extension === 'mp3' || extension === 'm4a' || extension === 'ogg' || extension === 'wav' || extension === 'flac' || extension === 'aac') {\n    contentType = 'audio';\n  }\n}\n\n// –ü–æ–ª—É—á–∞–µ–º chat_id\nconst chatId = data.chat_id || data.chatId || baseChatId || null;\n\n// –ò–∑–≤–ª–µ–∫–∞–µ–º —Ç–µ–∫—Å—Ç\nconst textContent = data.text || data.message || data.content || metadata.text || null;\n\n// –ö–†–ò–¢–ò–ß–ù–û: –ï—Å–ª–∏ –µ—Å—Ç—å filePath - —ç—Ç–æ –ú–ï–î–ò–ê-–§–ê–ô–õ!\nif (filePath) {\n  const lowerPath = filePath.toLowerCase();\n  const isVideo = contentType === 'video' || lowerPath.indexOf('.mp4') >= 0 || lowerPath.indexOf('.webm') >= 0 || lowerPath.indexOf('.mov') >= 0 || lowerPath.indexOf('video') >= 0 || platform === 'youtube' || platform === 'instagram' || platform === 'tiktok';\n  const isAudio = contentType === 'audio' || lowerPath.indexOf('.mp3') >= 0 || lowerPath.indexOf('.m4a') >= 0 || lowerPath.indexOf('.ogg') >= 0 || lowerPath.indexOf('audio') >= 0 || platform === 'yandex_music';\n  \n  if (isVideo) {\n    return {\n      json: {\n        file_path: filePath,\n        chat_id: chatId,\n        platform: platform,\n        metadata: metadata,\n        content_type: 'video',\n        has_video: true,\n        has_audio: false,\n        has_text: false\n      }\n    };\n  }\n  \n  if (isAudio) {\n    return {\n      json: {\n        file_path: filePath,\n        chat_id: chatId,\n        platform: platform,\n        metadata: metadata,\n        content_type: 'audio',\n        has_video: false,\n        has_audio: true,\n        has_text: false\n      }\n    };\n  }\n  \n  // –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –≤–∏–¥–µ–æ –¥–ª—è YouTube/Instagram/TikTok\n  if (platform === 'youtube' || platform === 'instagram' || platform === 'tiktok') {\n    return {\n      json: {\n        file_path: filePath,\n        chat_id: chatId,\n        platform: platform,\n        metadata: metadata,\n        content_type: 'video',\n        has_video: true,\n        has_audio: false,\n        has_text: false\n      }\n    };\n  }\n}\n\n// –¢–µ–∫—Å—Ç –¢–û–õ–¨–ö–û –µ—Å–ª–∏ –ù–ï–¢ —Ñ–∞–π–ª–∞\nif (textContent && !filePath) {\n  if (!chatId) {\n    return {\n      json: {\n        error: true,\n        message: '–ù–µ —É–¥–∞–ª–æ—Å—å –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å chat_id',\n        chatId: baseChatId\n      }\n    };\n  }\n  \n  let textToSend = String(textContent).trim();\n  if (textToSend.length > 4096) {\n    textToSend = textToSend.substring(0, 4093) + '...';\n  }\n  \n  return {\n    json: {\n      text_content: textToSend,\n      text: textToSend,\n      chat_id: String(chatId),\n      chatId: String(chatId),\n      platform: platform,\n      metadata: metadata,\n      content_type: 'text',\n      has_video: false,\n      has_audio: false,\n      has_text: true\n    }\n  };\n}\n\n// –ï—Å–ª–∏ –Ω–∏—á–µ–≥–æ –Ω–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–æ\nreturn {\n  json: {\n    file_path: filePath,\n    chat_id: chatId,\n    platform: platform,\n    metadata: metadata,\n    content_type: contentType || 'unknown',\n    has_video: false,\n    has_audio: false,\n    has_text: false,\n    error: true,\n    message: '–ù–µ —É–¥–∞–ª–æ—Å—å –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å —Ç–∏–ø –∫–æ–Ω—Ç–µ–Ω—Ç–∞'\n  }\n};"
      },
      "id": "code-process-response",
      "name": "Code - Process Response",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [1450, 300]
    },
    {
      "parameters": {
        "conditions": {
          "boolean": [
            {
              "value1": "={{ $json.error }}",
              "value2": true
            }
          ]
        }
      },
      "id": "if-process-error",
      "name": "IF - Process Error",
      "type": "n8n-nodes-base.if",
      "typeVersion": 1,
      "position": [1650, 200]
    },
    {
      "parameters": {
        "conditions": {
          "boolean": [
            {
              "value1": "={{ $json.has_video }}",
              "value2": true
            }
          ]
        }
      },
      "id": "if-has-video",
      "name": "IF - Has Video",
      "type": "n8n-nodes-base.if",
      "typeVersion": 1,
      "position": [1650, 300]
    },
    {
      "parameters": {
        "conditions": {
          "boolean": [
            {
              "value1": "={{ $json.has_audio }}",
              "value2": true
            }
          ]
        }
      },
      "id": "if-has-audio",
      "name": "IF - Has Audio",
      "type": "n8n-nodes-base.if",
      "typeVersion": 1,
      "position": [1650, 400]
    },
    {
      "parameters": {
        "conditions": {
          "boolean": [
            {
              "value1": "={{ $json.has_text }}",
              "value2": true
            }
          ]
        }
      },
      "id": "if-has-text",
      "name": "IF - Has Text",
      "type": "n8n-nodes-base.if",
      "typeVersion": 1,
      "position": [1650, 500]
    },
    {
      "parameters": {
        "chatId": "={{ $json.chat_id }}",
        "video": "={{ $json.file_path }}",
        "additionalFields": {
          "caption": "={{ $json.metadata && $json.metadata.title ? 'üé¨ ' + $json.metadata.title : '‚úÖ –í–∏–¥–µ–æ —Å–∫–∞—á–∞–Ω–æ' }}",
          "supports_streaming": true
        }
      },
      "id": "send-video",
      "name": "Send Video",
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1,
      "position": [1850, 300],
      "credentials": {
        "telegramApi": {
          "id": "telegram-credentials",
          "name": "Telegram Bot"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $json.chat_id }}",
        "audio": "={{ $json.file_path }}",
        "additionalFields": {
          "title": "={{ $json.metadata && $json.metadata.title ? $json.metadata.title : '–ê—É–¥–∏–æ' }}",
          "performer": "={{ $json.metadata && $json.metadata.artist ? $json.metadata.artist : '' }}",
          "duration": "={{ $json.metadata && $json.metadata.duration ? $json.metadata.duration : '' }}"
        }
      },
      "id": "send-audio",
      "name": "Send Audio",
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1,
      "position": [1850, 400],
      "credentials": {
        "telegramApi": {
          "id": "telegram-credentials",
          "name": "Telegram Bot"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $json.chat_id || $json.chatId }}",
        "text": "={{ $json.text || $json.text_content }}",
        "additionalFields": {
          "parse_mode": "HTML",
          "disable_web_page_preview": false
        }
      },
      "id": "send-text",
      "name": "Send Text Message",
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1,
      "position": [1850, 500],
      "credentials": {
        "telegramApi": {
          "id": "telegram-credentials",
          "name": "Telegram Bot"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $json.chatId || $json.chat_id }}",
        "text": "={{ $json.message || '‚ùå –ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞ –ø—Ä–∏ –æ–±—Ä–∞–±–æ—Ç–∫–µ –∑–∞–ø—Ä–æ—Å–∞' }}",
        "additionalFields": {
          "parse_mode": "HTML"
        }
      },
      "id": "send-processing-error",
      "name": "Send Processing Error",
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1,
      "position": [1850, 200],
      "credentials": {
        "telegramApi": {
          "id": "telegram-credentials",
          "name": "Telegram Bot"
        }
      }
    }
  ],
  "connections": {
    "Telegram Trigger": {
      "main": [
        [
          {
            "node": "Code - Parse URL",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Code - Parse URL": {
      "main": [
        [
          {
            "node": "IF - Check Error",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "IF - Check Error": {
      "main": [
        [
          {
            "node": "Send Error Message",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Send Status Message",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Send Status Message": {
      "main": [
        [
          {
            "node": "Switch - Platform",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Switch - Platform": {
      "main": [
        [
          {
            "node": "HTTP Request - YouTube",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "HTTP Request - Instagram",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "HTTP Request - TikTok",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "HTTP Request - Twitter",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "HTTP Request - Yandex.Music",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Send Unsupported Platform",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "HTTP Request - YouTube": {
      "main": [
        [
          {
            "node": "Code - Process Response",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "HTTP Request - Instagram": {
      "main": [
        [
          {
            "node": "Code - Process Response",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "HTTP Request - TikTok": {
      "main": [
        [
          {
            "node": "Code - Process Response",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "HTTP Request - Twitter": {
      "main": [
        [
          {
            "node": "Code - Process Response",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "HTTP Request - Yandex.Music": {
      "main": [
        [
          {
            "node": "Code - Process Response",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Code - Process Response": {
      "main": [
        [
          {
            "node": "IF - Process Error",
            "type": "main",
            "index": 0
          },
          {
            "node": "IF - Has Video",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "IF - Process Error": {
      "main": [
        [
          {
            "node": "Send Processing Error",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "IF - Has Video": {
      "main": [
        [
          {
            "node": "Send Video",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "IF - Has Audio",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "IF - Has Audio": {
      "main": [
        [
          {
            "node": "Send Audio",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "IF - Has Text",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "IF - Has Text": {
      "main": [
        [
          {
            "node": "Send Text Message",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "pinData": {},
  "settings": {
    "executionOrder": "v1"
  },
  "staticData": null,
  "tags": [],
  "triggerCount": 1,
  "updatedAt": "2024-01-01T00:00:00.000Z",
  "versionId": "2"
}

